{% extends './layout.html' %}
{% block head %}
<style>
.navbar{margin-bottom:0}
</style>
{% endblock %}
{% block main %}
<ol class="breadcrumb">
	<li><a href="/admin/index">后台管理</a></li>
	<li><a href="/admin/category">分类管理</a></li>
	<li class="active">编辑分类 -- {{ category.name }}</li>
</ol>
<div class="container">
	{% if message %}
	<div class="text-center">
		<div class="alert alert-warning alert-dismissible" role="alert" style="display:inline-block">
			<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			{{message}}
		</div>
	</div>
	{% endif %}
	<div class="form-horizontal">
		<div class="form-group" id="form" data-id="{{category._id.toString()}}">
			<div class="form-group">
				<label for="categoryName" class="col-sm-2 control-label">分类</label>
				<div class="col-sm-10">
					<input type="text" class="form-control" id="name" name="name" value="{{category.name}}">
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-offset-2 col-sm-10">
					<button class="btn btn-default" id="save">保存</button>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}
{% block scripts %}
<script>
	$('#save').on('click', function(){
		var id = $('#form').attr('data-id');
		var params = {
			name: $('#form input').val()
		};
		$.ajax({
			type: 'post',
			url: '/admin/category/edit?id=' + id,
			data: params,
			dataType: 'json',
			success: function(res){
				if(res.code){
					location.href = '/admin/category';
				}
			}
		})
	})
</script>
{% endblock %}