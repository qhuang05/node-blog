{% extends './layout.html' %}
{% block head %}
<style>
.navbar{margin-bottom:0}
</style>
{% endblock %}
{% block main %}
<ol class="breadcrumb">
	<li><a href="/admin/index">后台管理</a></li>
	<li class="active">内容管理</li>
</ol>
<table class="table table-hover table-bordered">
	<thead>
		<tr>
			<th>内容ID</th>
			<th>标题</th>
			<th>简介</th>
			<th>内容</th>
			<th>所属分类</th>
			<th>操作</th>
		</tr>
	</thead>
	<tbody>
		{% for content in contentList %}
		<tr>
			<td>{{content._id.toString()}}</td>
			<td>{{content.title}}</td>
			<td>{{content.description}}</td>
			<td>{{content.content}}</td>
			<td>{{content.category.name}}</td>
			<td>
				<a href="/admin/content_edit?id={{content._id.toString()}}">编辑</a> | 
				<a href="javascript:;" onclick="delContent('{{content._id.toString()}}')">删除</a>
			</td>
		</tr>
		{% endfor %}
	</tbody>
</table>
<nav aria-label="...">
	<ul class="pager">
		<li class="last-page"><a href="/admin/content?page={{ page-1 }}">上一页</a></li>
		<li>共{{total}}条记录，每页显示{{perPage}}条记录，共{{totalPage}}页，当前是第{{page}}页</li>
		<li class="next-page"><a href="/admin/content?page={{ page+1 }}">下一页</a></li>
	</ul>
</nav>
{% endblock %}
{% block scripts %}
<script>
	function delContent(id){
		$.ajax({
			type: 'post',
			url: '/admin/content/delete',
			data: {id: id},
			success: function(res){
				if(res.code == 0){
					location.reload();
				}
			}
		})
	}
</script>
{% endblock %}